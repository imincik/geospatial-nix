# Example Python web application

This is a example web application demonstrating development of Python
application using dependencies provided by multiple sources.

Application data can be generated by local Python server or by
PostgreSQL/PostGIS database backend.


## Dependencies

### Provided by Geonix

* shapely
* PostgreSQL/PostGIS DB container image

### Provided by Nixpkgs

* matplotlib

### Provided by Poetry

* flask
* black
* isort


## Usage

* Lock Flake dependencies

```
nix flake lock
```

* Add all files to git !

```
git add *
```

### Development

* Enter development shell

```
nix develop
```

* Install Python virtual environment using Poetry

```
poetry env use $(which python)
poetry install
```

* Launch Python application development server (with local data backend)

```
poetry run flask run --reload
```

* Launch Python application development server (with database data backend)

```
geonix build geonix-postgresql-image
docker load < ./result
docker-compose up -d

BACKEND=db poetry run flask run --reload
```

* Exit development shell

```
exit
```

### PostgreSQL

* Connect to PostgreSQL DB container (run in development shell)

```
psql
```

### Geonix CLI

* Search for additional packages (run in development shell)

```
geonix search <PACKAGE>
```


## More info

* [Nix tutorials](https://nix.dev)
